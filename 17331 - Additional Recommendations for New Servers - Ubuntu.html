<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

  <head>
  <title>Additional recommendations for new servers - Ubuntu, Debian</title>
<style type="text/css">
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}
</style>

</head>
<body>
<p>Getting started with adding security features after configuring your Ubuntu or Debian server.</p> 
 
 <h1>Additional Recommendations for New Servers - Ubuntu, Debian</h1>  
  <p><strong>Difficulty</strong>:<em><u> 1</u></em><br/>
<strong>Time</strong>:<em><u> 10 minutes</u></em></p>
  <p>After setting up your Ubuntu or Debian server, you can configure some additional components. These steps are optional but recommended as they increase security and make your operating system work better. </p>
  
<p>This article guides you through setting up a firewall and synchronizing Network Time Protocol.</p>
<p>If you haven't already set up your server, see the initial setup guide for either <a href="/article/17327?prog_id=PROG_ID" target="_blank">Ubuntu</a> or <a href="/article/17325?prog_id=PROG_ID" target="_blank">Debian</a> for instructions, including setting up user accounts. Make sure to set up a user account with <code>sudo</code> privileges.</p>
<p>Ubuntu comes prepackaged with a firewall tool called Uncomplicated Firewall (UFW), a command-line user interface that makes it easy to manage your Linux&trade; firewall. If you are running Debian, or uninstalled UFW from your Ubuntu server, see <a href="/article/19189?prog_id=PROG_ID" target="_blank">Install a UFW Firewall - Debian, Ubuntu</a>for installation instructions.</p>
<h2>Set up a basic firewall</h2>
                <p>Set up your firewall to protect your server from any traffic you haven't approved. </p>
<h3>Create firewall rules</h3>
                <p>Define exceptions to your firewall policy so that you can activate your firewall.</p> <br />
    <ol>
        <li>Create an exception for secure shell (SSH) connections to get remote administration access. By default, the SSH daemon runs on port 22. <code>ufw</code> can call a rule by name if the default was changed.
              <ul><li>If you have not modified the SSH port, enable the exception:
                        <div class="hacker">sudo ufw allow ssh</div> </li>
           <li>   If you have modified the port that the SSH daemon listens on, allow it by entering the port number and TCP protocol:
                            <div class="hacker">sudo ufw allow 4444/tcp</div>  </li>   </ul>
              This configuration is the strictest possible, and every incoming connection is denied except for the port just enabled. All other services are inaccessible. If you want to run additional services, open the proper port.    </li>

        <li>    Open any of the following ports:  <br />

               <ul> <li>To run a standard HTTP web server, open port 80:
                    <div class="hacker">sudo ufw allow 80/tcp </div></li>

             <li> To run an SSL/TLS enabled web server, open port 443:
                    <div class="hacker">sudo ufw allow 443/tcp</div> </li>

            <li>   To enable your SMTP email connection, open port 25:
                    <div class="hacker">sudo ufw allow 25/tcp</div>   </li>   </ul>    </li>


        <li>    Review your exceptions:
               <div class="hacker">sudo ufw show listening</div>    


    The <code>ufw show listening</code> command lists your configured firewall rules in human-readable format, even when your firewall is inactive. 
     </li>
       </ol>

<h3>Enable the firewall</h3>
              
<ol><li>If the <code>ufw show listening</code> command lists all the rules you want, enable your firewall:

   <div class="hacker">sudo ufw enable</div></li>

<li>At the prompt, enter <strong>y</strong> to continue. This entry applies your exceptions, blocks all other traffic, and configures your firewall to start automatically at startup.</li></ol>

<p>If you configure additional services later, make sure to open their respective ports.  </p>
<p>
 For more in-depth firewall instructions, see our<a href="/article/17400?prog_id=PROG_ID" target="_blank">IPtables guide</a>.
IPtables is the full suite of commands used to manage Netfilter, the Linux packet-filtering framework. Since IPtables is considered complicated to use, the ufw program helps by simplifying IPtables commands in an intuitive interface. It is generally the front-end solution of choice for host-based firewalls.</p>
<h2>Synchronize Network Time Protocol (NTP)</h2>
<p>
When different computer or server programs with out-of-sync clocks communicate with each other, switching between these systems can cause the time to jump back and forth. This jumping can cause undesirable effects such as email replies appearing to arrive before the original message is sent.</p>
<p>
To resolve this issue, configure the time zone and Network Time Protocol (NTP)  synchronization.</p>

<h3>Configure time zone</h3>

<ol>
  <li>Set your server's time zone by reconfiguring the <code>tzdata</code> package. <code>tzdata</code> (time zone database) is a public-domain time zone database maintained by a global network of NTP servers.
    <div class="hacker">sudo dpkg-reconfigure tzdata</div> 

The package configuration window displays. </li>
<li>Use the Up and Down arrow keys on the keyboard to find your geographic area (which are continents and oceans). Find the region/geographic area of your server, and then select <strong>OK</strong>: <br /> 
  
  
  <img src="http://img4.wsimg.com/support/images/cloudserver/17331/072715/ntp-package-configuration-geo-area-screen.png" alt="ntp package configuration geo area screen" />
  <br />
  
  <p class="note">For North America, select <strong>America</strong> (the second option). Note that  <strong>US</strong>  (the option before <strong>None of the above</strong>) stands for "<strong>U</strong>se <strong>S</strong>ystem V style time zones," not for &quot;United States.&quot;</p> 
  
</li>
<li>In the next menu, select the city or region of your time zone, and then select <strong>OK</strong>: <br />


<img src="http://img4.wsimg.com/support/images/cloudserver/17331/072715/ntp-package-configuration-time-zone-screen.png" alt="ntp package configuration time zone screen" />  <br />

Your system updates to your selected timezone: 

<div class="hacker">
Current default time zone: 'America/Vancouver' <br />
Local time is now:      Mon Jul  10 13:00:10 PST 2015.  <br />
Universal Time is now:  Mon Jul  10 20:00:10 UTC 2015.       </div>
</li></ol>

<h3>Configure NTP synchronization</h3>

<p>Next, configure your NTP. NTP is an Internet protocol that synchronizes time of computer clocks across the Internet and helps to determine when events happened between systems. A client requests the current time from an NTP server and then uses the server's response to set its own clock. Afterward, your computer is accurately synced with networked time servers. </p>

<ul><li>Install the NTP daemon:
<div class="hacker">sudo apt-get install ntp </div> 

NTP synchronization is now active on your server. Your system adjusts the time throughout the day to match up with global NTP servers.</li>
</ul>
  
 
 <h2>Next steps</h2>
 
<p>Your setup is complete! Remember that you can always add on to your configuration as you add more services. </p>

<p>If you like this configuration, you can <a href="/article/19042?prog_id=PROG_ID">take a server snapshot</a> to use as a guide for setting up future installations.</p>

<p>Also, consider <a href="/article/17326?prog_id=PROG_ID" target="_blank">adding swap space</a>. Adding swap space is an easy way to increase cloud server performance and is particularly helpful if you host  databases on your system. </p>
  </body>
</html>
