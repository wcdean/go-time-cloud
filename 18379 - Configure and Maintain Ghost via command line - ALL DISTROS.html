<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>




<title>Configure and Maintain Ghost via command line - ALL DISTROS</title>
<style type="text/css">
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}

table {border-collapse: collapse; color: #333; margin: 1.2rem 0;}
tr:nth-child(odd) {background-color: #f7f7f7 
;}
tr:nth-child(1) {background-color:#ddd;}
th{ border-right: 1px solid #ddd; padding: 5px; text-align:left;}
td{border: 1px solid #b2b2b2 
;padding: 5px;vertical-align:top;}
td:nth-child(1) {font-weight:bold;}

</style>


</head>

<body>
<p>Setting up and maintaining Ghost via command line on all distros, Ghost, System Tools, SSH</p>
<h1>Configure and Maintain Ghost via command line - ALL DISTROS</h1>

<p><strong>Difficulty:</strong> <em>1</em></p>
<p><strong>Time:</strong> <em>30 mins</em></p>

<p>Ghost provides a blogging platform that one can easily get started as beginner. This article will assist you in configuring and maintaining <!--The article covers installing and configuring. cj -->Ghost using the command line. Ghost is built on <code>Node.js</code> and requires the most stable version<!--Most stable version of what? cj --></p>

<h2>Install Ghost in Ubuntu or Debian</h2>
<ol>
<li>Update Ubuntu.
  <div class="hacker">sudo apt-get update</div>
<div class="hacker">sudo apt-get upgrade -y</div>
<div class="hacker">sudo aptitude install -y zip vim wget</div>
</li>
<li>Install <code>node.js</code>.
<div class="hacker">sudo curl -sL https://deb.nodesource.com/setup | sudo bash -</div>
<div class="hacker">sudo apt-get install -y nodejs</div>
</li>	
<li>Download and install Ghost.
<!--Use a separate div for each command. (See editorial guidelines.) Same issue in each of the installation sections below. cj -->
  <div class="hacker"><pre>sudo mkdir -p /var/www/
cd /var/www/
sudo wget https://ghost.org/zip/ghost-latest.zip
sudo unzip -d ghost ghost-latest.zip
cd ghost/
sudo npm install --production</pre></div>
</li>
</ol>

<h2>Install Ghost in CentOS</h2>
<ol>
<li>Update Ubuntu.
  <div class="hacker">Sudo yum update</div>
<div class="hacker">Sudo yum upgrade -y</div>
<div class="hacker">sudo yum install -y zip vim wget</div>
</li>
<li>Install <code>node.js</code>.
<div class="hacker">curl -sL https://deb.nodesource.com/setup | sudo bash -</div>
<div class="hacker">sudo yum install -y nodejs</div>
</li>
<li>Download and install Ghost.

  <div class="hacker"><pre>sudo mkdir -p /var/www/
cd /var/www/
sudo wget https://ghost.org/zip/ghost-latest.zip
sudo unzip -d ghost ghost-latest.zip
cd ghost/
sudo npm install --production</pre></div>

If you receive the error  "npm command not found", use the following command<!--What does the command do? cj -->:
	
<div class="hacker">sudo yum -y install  nodejs npm</div>
</li>
</ol>

<h2>Install Ghost in Arch Linux</h2>
<ol>
<li>Update Ubuntu.
  <div class="hacker">Sudo pacman -Sy</div>
<div class="hacker">sudo pacman -S zip </div>
<div class="hacker">sudo pacman -S wget</div>
<div class="hacker">sudo pacman -S vim </div>
</li>
<li>Install <code>node.js</code>.
<div class="hacker">sudo pacman -S nodejs</div>
</li>	
<li>Download and install Ghost.

  <div class="hacker"><pre>sudo mkdir -p /var/www/
cd /var/www/
sudo wget https://ghost.org/zip/ghost-latest.zip
sudo unzip -d ghost ghost-latest.zip
cd ghost/
sudo npm install --production</pre></div>

If you receive the error  "unzip command not found", use following command:<!--What does the command do? cj -->
	<div class="hacker">sudo pacman -S unzip</div>
</li>    
</ol>   
 
<h2>Install Ghost in Fedora</h2>
<ol>
  <li> Install npm, Nginx, and Supervisor.
    <div class="hacker">yum install npm nginx supervisor</div>
</li>
<li>Download and install Ghost.
  <div class="hacker"><pre>mkdir -p /var/www/
cd /var/www/  
curl -L -O https://ghost.org/zip/ghost-latest.zip  
unzip -d ghost ghost-latest.zip  
cd ghost
sudo npm install --production</pre></div>
</li>
</ol>

<h2>Configure Ghost</h2>

<p>Configurations related to environment settings such as database, URL, and mail configuration settings are handled in the <code>config.js</code> file.</p>
<ol>
  <li> Open <code>config.js</code> in a text editor.

<ul>
  <li>If you've run Ghost, this file is located in the Ghost home direcoty.</li>
  <li>If you haven't yet run Ghost, you can copy the <code>config.example.js</code> file
    <!--Where is this example file located? cj -->
and name it &quot;config.js&quot;.</li>
</ul>

  <li>Make changes as desired. See options below.</li>
  <li>Save and close the file.</li>
</ol>
<h3>URL </h3>
<p>Set the URL for your blog. If you don't set this URL, your blog still runs, but external links such as email messages and RSS feeds will be incorrect. Set to full URL of your blog including "http://" or "https://" </p>
<h3>Mail </h3>
<p>This email address is used to reset your password.</p>
<h3>SSL </h3>
<p>The first time  your blog is configured for SSL, leave the URL that begins with <code>http://</code> . Ghost  accepts requests made through HTTPS securely and skips the plain HTTP requests. So you can access your blog using both secure and insecure methods without any redirection.</p>
<p>If you configure SSL and changethe URL to "https://", Ghost  accepts all requests securely. All requests sent through plain HTTP are redirected to HTTPS.</p>
<p>To save only the admin panel (that is, /ghost/) via SSL, you can leave the URL as "https://" and set the following option true:</p>
<div class="hacker">forceAdminSSL: true</div>
<p>This setting redirects any HTTP requests at the admin site to HTTPS. </p>
<p>You can reject insecure requests rather than redirecting with the following:</p>
		<div class="hacker">forceAdminSSL: {redirect:false}</div>
<p>If you want to serve SSL versions of your blog from different URLs to the one configured in <code>URL</code>, you can configure an alternative.</p>
<div class="hacker"><pre>url: http://myblog.com,
urlSSL: https://secure.myblog.com</pre></div>

<h3>Database </h3>
<p>SQLite, the default configuration in Ghost,  requires no configuration. You can configure MySQL like this:</p>

<div class="hacker"><pre>database: {
  client: 'mysql',
  connection: {
    host     : '127.0.0.1',
    user     : 'your_database_user',
    password : 'your_database_password',
    database : 'ghost_db',
    charset  : 'utf8'
  }
}</pre></div>

<p>With  pool settings, you can limit simultaneous connections:</p>
<div class="hacker"><pre>database: {
  client: ...,
  connection: { ... },
  pool: {
    min: 2,
    max: 20
  }
}</pre></div>

 <p>Ghost also runs with PostgreSQL, but support is unofficial.</p>
<h3>Server </h3>
<p>Ghost  listens only to the server host IP address and port number for requests. In general, requests are routed from port 80 to Ghost by either Nginx (recommended) or Apache.</p>
<div class="hacker"><pre>server: {
    host: '127.0.0.1',
    port: '2368'
}</pre></div>


<h3>Unix Socket </h3>
<p>By making changes to the server configuration, Ghost can also be se tup to listen on a unix socket .</p>
<div class="hacker"><pre>server: {
    socket: 'path/to/socket.sock'
}</pre></div>

<p>Although 0660 is the default permitted value,  this can also be set up as follows:</p>

<div class="hacker"><pre>server: {
    socket: {
        path: 'path/to/socket.sock',
        permissions: '0666'
   }
}</pre></div>

<h3>Gzip Compression </h3>
By default, gzip compression is enabled, helping to improve the page-load speed. You may turn off this feature using this setting:
<div class="hacker">compress: false</div>
<h3>Privacy </h3>
<p>The configuration options in the <code>PRIVACY.md</code> file are turned on by default. However, you can disable them.</p>
<p>To turn off all of these options, add the following <!--Does the user add this to the PRIVACY.md file (if so, where is that file?) or to the config.js file? cj -->  (Note that this setting overrides all other<!--I added "privacy". Please verify that that is correct. If it isn't correct, please clarify which settings are overriden. cj --> privacy settings):</p>
<div class="hacker"><pre>privacy: {
    useTinfoil: true,
}</pre></div>
<p>To turn off all the options individually: </p>
<div class="hacker"><pre>privacy: {
    useUpdateCheck: false,
    useGoogleFonts: false,
    useGravatar: false,
    useRpcPing: false,
    useStructuredData: false
}</pre></div>

<p>The following table describes the privacy options:</p>
<table width="504" border="1">
  <tr>
    <th width="120" scope="col">Option</th>
    <th width="201" scope="col">Description</th>
    <th width="161" scope="col">Notes</th>
  </tr>
  <tr>
    <td>useUpdateCheck</td>
    <td>Update Check</td>
    <td><p>Ghost 0.4
      <!--Is this the only version that checks? Is it the most recent version and new functionality? cj-->
    checks for updates automatically. </p></td>
  </tr>
  <tr>
    <td>useGoogleFonts</td>
    <td><p>Google Fonts</p></td>
    <td><!--What does the option do? cj -->&nbsp;</td>
  </tr>
  <tr>
    <td> useGravatar</td>
    <td>Gravatar</td>
    <td><!--What does the option do? cj -->&nbsp;</td>
  </tr>
  <tr>
    <td>useRpcPing </td>
    <td>RPC Ping</td>
    <td><!--What does the option do? cj -->&nbsp;</td>
  </tr>
  
  <tr>
    <td>useStructuredData</td>
    <td>Structured Data</td>
    <td><!--What does the option do? cj -->&nbsp;</td>
  </tr>
</table>


<h3>File Storage </h3>
<p>Few platforms don't have persistent file system like "Heroku". So any image that is uploaded might get missed out at some point.</p>
<p> To disable Ghost's file storage: <!-- This looks like a rewrite of http://support.ghost.org/config/#privacy but is missing words and doesn't make sense. Please clarify. cj --></p>
<div class="hacker">fileStorage: false</div>

<p>In case when you disable the file storage, Ghost's image will upload tools will ask you to enter a URL by default. This will help in preventing you from uploading files that might go missing.</p>

<h3>Paths </h3>
<p>To use a content directory not in the Ghost folder, you can specify a paths object with a new content path.</p>

<div class="hacker"><pre>paths: {
    contentPath: path.join(__dirname, '/path/to/content/dir/')
},</pre></div>

<h2>Using Environments </h2>
<p>If you want  Ghost to run under a different environment, you need to use an environment variable. For example, if you normally start Ghost with node <code>index.js,</code> you'd use <!--The user just installed Ghost. They don't run it yet. Please clarify what we are trying to teach the user. Also, these examples are very close to those used in http://support.ghost.org/config/#privacy.  cj -->:</p>
<div class="hacker">NODE_ENV=production node index.js</div>
<p>Or, you can use <code>forever</code>:</p>
<div class="hacker">NODE_ENV=production forever start index.js</div>
<p>Or if you use <code>npm start</code>,  use the following command:</p>
<div class="hacker">npm start --production</div>
<h2>Conclusion</h2>
<p>In this article, you learned to configure and maintain Ghost via the command line.</p>

</body>
</html>