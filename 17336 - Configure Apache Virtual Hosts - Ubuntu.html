<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>

<title>Configure Apache Virtual Hosts - Ubuntu</title>
<style type='text/css'>
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}
</style>


</head>

<body>
<p>Configure Apache Virtual Hosts Setup on Ubuntu.</p>

    <h1>Configure Apache Virtual Hosts - Ubuntu</h1>
    
   <p><strong>Difficulty</strong>: <em><u>2</u></em><br />
        <strong>Time</strong>: <em><u>15 minutes</u></em></p>
    
<p>Want to host multiple websites? Using Apache? Great. This article will show you how to do exactly that using Apache’s “virtual hosts” – and it’ll let you do it without needing any additional IP addresses.</p>

<p>In Apache, every site is handled by a virtual host which points incoming <code>http</code> traffic to a particular directory (i.e. the root directory of the website for the domain in the request). By default, Apache only creates one virtual host but you can configure more – as many as your server can handle.</p>

<p>Throughout this article, we'll use an example domain – <em><u>coolexample.com</u></em> – but you should replace it with the domain name or subdomain you want to host on your server.</p>

    
<h2>Install the Apache web server</h2>
<p>To get Apache on your server, you can either <a href="/article/17341?prog_id=PROG_ID">install it as part of a LAMP stack</a>, or you can install Apache by itself:</p>

<ol>
    <li>Update your packages using <code>apt-get</code>:
        <div class="hacker">sudo apt-get update</div></li>
    <li>Install Apache:
        <div class="hacker">sudo apt-get install apache2</div></li>
</ol> 
   
<h2>Set up the virtual host</h2>
<ol>
    <li>Create the virtual directories for your domain:
        <div class="hacker">sudo mkdir -p /var/www/<em><u>coolexample.com</u></em>/public_html</div></li>
    <li>Set up ownership and grant permissions. Change the ownership to the Apache group using <code>chown</code>:
        <div class="hacker">sudo chown -R www-data:www-data /var/www/<em><u>coolexample.com</u></em>/public_html</div></li>
    <li>Set read permissions to the Apache web root <code>/var/www</code> directory to enable access to the files from that directory. Modify permissions so that the general web directory has read access.
        <div class="hacker">sudo chmod -R 755 /var/www/<em><u>coolexample.com</u></em>/public_html</div></li>
</ol>
    
<h2>Create a sample page for your virtual host</h2>
    
<ol>
    <li>Create a sample page for your virtual host:
        <div class="hacker">sudo vim /var/www/<em><u>coolexample.com</u></em>/public_html/index.html</div></li>
    <li>Add some content to the file:
        <div class="hacker"><pre>&lt;html&gt; 
    &lt;head&gt; 
    &lt;title&gt;Welcome to my site!&lt;/title&gt; 
    &lt;/head&gt; 
    &lt;body&gt; 
    &lt;h1&gt;Hooray! Your virtual host is working!&lt;/h1&gt; 
    &lt;/body&gt; 
&lt;/html&gt;</pre></div></li>
    <li>Save and close the file:
      <div class="hacker">:wq!</div></li>
</ol>

<h2>Create virtual host file</h2>
<p>We're going to borrow Apache's default config file<code> 000-default.conf</code> from the <code>sites-available</code> directory as a template.</p>

<ol>
    <li>Copy the <code>000-default.conf</code> file:
        <div class="hacker">sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/<em><u>coolexample.com</u></em>.conf</div></li>
    <li>Open your newly copied config file:
        <div class="hacker">sudo vim /etc/apache2/sites-available/<em><u>coolexample.com</u></em>.conf</div></li>
    <li>In the file, find <code>DocumentRoot</code> towards the beginning of the file, and update with your own domain:
        <div class="hacker">DocumentRoot /var/www/<em><u>coolexample.com</u></em>/public_html</div></li>
    <li>Below <code>DocumentRoot</code>, add these two lines:
       <div class="hacker">ServerName <em><u>www.coolexample.com</u></em><br />ServerAlias <em><u>coolexample.com</u></em></div></li>
    <li>Save and close the file:
      <div class="hacker">:wq!</div></li>
</ol>

<p class="note">Updating the <code>ServerAdmin</code>, <code>ErrorLog</code>, and <code>CustomLog</code> are not required to set up your virtual host, but you can go ahead and update <code>ErrorLog</code> and <code>CustomLog</code> to your domain and <code>ServerAdmin</code> to your email.</p>

<h2>Enable your virtual host</h2>
<ol>
    <li>Enable your virtual host:
        <div class="hacker">sudo a2ensite <em><u>coolexample.com</u></em>.conf</div></li>
    <li>Restart Apache:
        <div class="hacker">sudo service apache2 restart</div></li>
</ol>

<h2>Point your domain name to your server</h2>
<p>If your domain name isn't currently loading another website, you should point it to your server to test your new config.</p>

<p>How you do this depends on where your domain name is registered and whose server you're using:</p>

<style>
table {border-collapse: collapse; color: #333; margin: 1.2rem 0;}

tr:nth-child(odd) {background-color: #f7f7f7;}

tr:nth-child(1) {background-color:#ddd;}

th{border-right: 1px solid #ddd; padding: 5px; text-align:left;}

td{border: 1px solid #b2b2b2;padding: 5px;vertical-align:top;}
</style>
<table>
    <tr>
        <th>Domain registered?</th>
        <th>Server hosted?</th>
        <th>Do this...</th>
    </tr>
    <tr>
        <td>COMPANY_NAME</td>
        <td>COMPANY_NAME</td>
        <td><article id="19116" /></td>
    </tr>
    <tr>
        <td>Another company</td>
        <td>COMPANY_NAME</td>
        <td><article id="19051" /> and then update your domain name's primary ("@") A record.</td> 
    </tr>
    <tr>
        <td>COMPANY_NAME</td>
        <td>Another company</td>
        <td>Find your server's IP address, and then <a href="/article/20134?prog_id=PROG_ID">change your domain's IP address to use it</a>.</td>
    </tr>
    <tr>
        <td>Another company</td>
        <td>Another company</td>
        <td>Find your server's IP address, and then change your domain's IP address to use it.</td>
    </tr>
</table>

<p>Changes to your domain can take up to 48 hours to display across the internet. However, once they do, you can visit your domain name and view the test page you created earlier!</p>

<!--<p class="note">You can test your virtual host locally by setting up local hosts on your computer alone. This is a good option if you have not yet pointed your domain name to the IP address of your VPS. See <a href="00003 - Set up Local Hosts to Test Virtual Host Setup - ALL DISTROS.html"> Set up Local Hosts to Test Virtual Host Setup - ALL DISTROS</a> for more on how to do this.</p>-->
      

<h2>Next Steps</h2>
<p>To create additional virtual hosts, you can use the steps above and create different <code><em>your domain name</em>.conf</code> files.</p>

  </body>
</html>