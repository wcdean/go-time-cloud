<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>
    <!--Article Number is 17325-->
    <title>Initial Server Setup - Debian</title>
    <style type='text/css'>
        div.hacker {
            background-color: #666;
            border: 1px solid #ccc;
            color: #fff;
            font-family: "Lucida Console","Courier New",Courier,fixed;
            font-size: 95%;
            line-height: 160%;
            margin-bottom: 1.5em;
            padding: 10px;
        }

        p.note {
            background-color: #ffffe6;
            border: 1px solid #eee;
            color: #666;
            padding: .8em 1.6em;
            margin: 15px 0;
        }

        .warning {
            border: 1px #d25100 solid;
            padding: .5em 1em .5em 4em;
            margin: 10px 20px 15px 20px;
            background-image: url('@{help-img-path}/img_warning.gif');
            background-repeat: no-repeat;
            background-position: left top;
            background-color: #ededed;
            -moz-border-radius: 0.8em;
            -webkit-border-radius: 0.8em;
            /* -moz-border-bottom-radius: 0;9 */
            -webkit-border-bottom-radius: 0;
            padding-top: 14px;
            padding-bottom: 15px;
        }
    </style>

</head>
<body>
    <p>Setting up a Debian server to use SSH public key authentication, general server updates System Setup</p>
    <h1>Initial Server Setup - Debian</h1>
    <p><strong>Difficulty</strong>: <em>1</em>
        <br/>
        <strong>Time</strong>: <em>60 mins</em>
    </p>
    <p>In this article, we review the steps that should be taken prior to setting up a new Debian server in the COMPANY_NAME cloud panel and steps to perform once your new server is available for use. We will setup the new server to use SSH public key authentication, connect to the server via SSH using public key authentication and update the software that comes pre-installed on the server to the most recent version.</p>
    <h2>Add SSH Public Key Authentication</h2>
    <p class="note">
        Note: These steps are for Mac OS X users. For information on adding SSH public key authentication for Windows, see <a href="/article/19228?prog_id=PROG_ID" target="_blank">Use SSH Keys with PuTTY</a>.
    </p>
    <h3>Step 1: Create SSH public/private key pairs</h3>
    <ol>
        <li>Open terminal</li>
        <li>Create a new key, using your email address as a label
            <br/>
            <div class='hacker'>ssh-keygen -t rsa -b 2048 -C "your_email_address@email.com"</div>
        </li>
        <li>Enter the file name and location to save the key. Recommend keeping the default setting</li>
        <li>Enter file in which to save the key
            <br/>
            <div class='hacker'>(/Users/yourName/.ssh/id_rsa): [Press Enter]</div>
        </li>
        <li>Enter a passphrase, at least 6 characters in length</li>
        <li>Enter the same passphrase again</li>
    
    <li>Once completed, you will be given your key fingerprint:<br/>
    <div class='hacker'>
        <pre>
Your identification has been saved in /Users/yourName/.ssh/test_key.
Your public key has been saved in /Users/yourName/.ssh/id_rsa.pub.
The key fingerprint is:
45:06:b5:b0:65:09:10:ff:20:4c:16:99:78:39:5a:b9
The key's randomart image is:
+--[ RSA 2048]----+
|     .*O++*.     |
|    .+O. B..     |
|     +oo+ o      |
|    . E. +       |
|        S .      |
|                 |
|                 |
|                 |
|                 |
+-----------------+
</pre>
    </div></li>
    </ol>
    <h3>Step 2: Copy public SSH key</h3>
    <ol>
        <li>Open terminal (if closed after previous step)</li>
        <li>Copy the contents of the public SSH key created in the previous step
            <br/>
            <div class='hacker'>pbcopy %3C /Users/yourName/.ssh/id_rsa.pub</div>
        </li>
    </ol>
    <p>The contents of your public SSH key are now in your clipboard and ready for use in the next step.</p>
    <h3>Step 3: Load public SSH key in GoDaddy</h3>
    <ol>
        <li>Go to the SSH key page in the Godaddy panel - <a href='https://cloud.godaddy.com/keys'>https://cloud.godaddy.com/keys</a></li>
        <li>Click <strong>Create Key</strong></li>
        <li>In the Godaddy panel, click <strong>Create Key</strong>. The <strong>Create SSH Key</strong> window will open.
            <br/>
            <img src='images/17325/073015/create1.png' alt='Create SSH Key screenshot' />
        </li>
        <li>Enter a unique name that identifies the SSH key you created in previous step.</li>
        <li>Paste the contents (copied in the previous step) in the <strong>Key</strong> field.</li>
        <li>Click <strong>Ok</strong>. A <strong>Success</strong> message will display.</li>
    </ol>
    <h3>Step 4: Spin up new server</h3>
    <ol>
        <li>In the Godaddy panel, click <strong>Servers</strong></li>
        <li>Click <strong>Create Server</strong> button</li>
        <li>Give a unique name to your server, choose a size and base image</li>
        <li>Enter a username. This should be a different username than your main Godaddy account name.</li>
        <li>In the <strong>Password</strong> field, choose <strong>Connect through SSH instead</strong></li>
        <li>Select the SSH key created in Step 3 from the drop down list</li>
        <li>Click <strong>Finish</strong></li>
    </ol>
    <h2>Disable Remote Root SSH Login</h2>
    <p>As a security best practice, remote root account login should be disabled. COMPANY_NAME disables root login on all COMPANY_NAME cloud servers.</p>
    <p>The steps to disable remote root account ssh login on a non-COMPANY_NAME server are:</p>
    <ol>
        <li>Open the sshd_config
            <br/>
            <div class='hacker'>sudo vim /etc/ssh/sshd_config</div>
        </li>
        <li>Add/Edit the following line in the sshd_config:
            <br/>
            <div class='hacker'>PermitRootLogin no</div>
        </li>
        <li>Save file changes</li>
        <li>Restart the ssh service
            <br/>
            <div class='hacker'>sudo service ssh restart</div>
        </li>
    </ol>
    <h2>Update The Server</h2>
    <p>After logging into a new server, update all software currently installed on the server.</p>
    <ol>
        <li>Update software sources list
            <br/>
            <div class='hacker'>sudo apt-get update</div>
        </li>
        <li>Upgrade all currently installed software on the system
            <div class='hacker'>sudo apt-get upgrade</div>
        </li>
    </ol>
    <h2>Next Steps</h2>
    <p>In this article, you have created a new Debian server on the COMPANY_NAME cloud platform, setup and connected to the server via SSH using public key authentication and updated the software that comes pre-installed on the server.</p>
</body>
</html>