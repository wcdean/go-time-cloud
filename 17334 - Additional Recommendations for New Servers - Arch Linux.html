<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>

<title>Initial server setup (part 2) - Arch Linux</title>
<style type='text/css'>
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}
</style>


</head>

<body>
<p>Getting started with adding security features after configuring your Arch Linux server. </p>
    <h1>Initial server setup (part 2) -  Arch Linux</h1>

    <p><strong>Difficulty</strong>: <em><u>1</u></em><br/>
        <strong>Time</strong>: <em><u>10 minutes</u></em></p>

<p>After you’ve <a href="/article/17324?prog_id=PROG_ID">set up your server</a>, there a few other steps we recommend to ensure its security make sure your server’s secure and works like you’d expect.</p>

<p>These steps are optional, but they’re the kind of things that seasoned admins always take care of.</p>

<style>
table {border-collapse: collapse; color: #333; margin: 1.2rem 0;}

tr:nth-child(odd) {background-color: #f7f7f7;}

tr:nth-child(1) {background-color:#ddd;}

th{ border-right: 1px solid #ddd; padding: 5px; text-align:left;}

td{border: 1px solid #b2b2b2;padding: 5px;vertical-align:top;}

td:nth-child(1) {font-weight:bold;}
</style>

 <h2>Set up a basic firewall</h2>
<p>Creating a firewall protects your server from malicious traffic that can lead to security issues or degraded performance due to floods of traffic, such as DDoS attacks.</p>

<h3>Install UFW firewall</h3>
<ul>
  <li>Install the UFW firewall:
    <div class="hacker">sudo pacman -Syu ufw</div></li>
</ul>

<h3>Create firewall rules</h3>
<p>Define exceptions to your firewall policy so that you can activate your firewall.</p>

<ol>
  <li>Create an exception so you can connect to your server through SSH:
        <div class="hacker">sudo ufw allow 22/tcp</div>
        <p class="note">If you've changed your default SSH port, replace 22 with your port number.</p></li>

  <li>Open any of the following ports based on what services you need:
    <table>
        <tr>
        <th>You want to enable...</th>
        <th>Run this command</th>
        </tr>
        <tr>
          <td>Web server (HTTP) traffic</td>
          <td><div class="hacker">sudo ufw allow 80/tcp</div></td>
        </tr>
        <tr>
          <td>Web server &amp; SSL (HTTPS) traffic</td>
          <td><div class="hacker">sudo ufw allow 443/tcp</div></td>
        </tr>
        <tr>
          <td>Outgoing email (SMTP)</td>
          <td><div class="hacker">sudo ufw allow 25/tcp</div></td>
        </tr>
    </table></li>

  <li>Review your exceptions:
    <div class="hacker"> sudo ufw show added </div></li>
</ol>

<p>The <code>ufw show added</code> command lists your configured firewall rules in human-readable format, even when your firewall is inactive.</p>

<h3>Enable the firewall</h3>
              
<ol>
  <li>If the <code>ufw show added</code> command lists all the rules you want, enable your firewall:
    <div class="hacker">sudo ufw enable</div></li>

  <li>At the prompt, enter <strong>y</strong> to continue. This entry applies your exceptions, blocks all other traffic, and configures your firewall to start automatically at startup.</li>

</ol>

<p>If you configure additional services later, make sure to open their respective ports.  </p>

<!--<p>For more in-depth firewall instructions, see <a href="/article/17400?prog_id=PROG_ID">Set Up a Firewall Using IPtables</a>.
iptables is the full suite of commands used to manage Netfilter, the Linux packet-filtering framework. Since iptables is considered complicated to use, the ufw program helps by simplifying iptables commands in an intuitive interface. It is generally the front-end solution of choice for host-based firewalls.</p>-->

<h2>Synchronize Network Time Protocol</h2>
<p>When different computer or server programs with out-of-sync clocks communicate with each other, switching between these systems can cause the time to jump back and forth. This can cause undesirable effects such as incorrect timestamps on emails or logs.</p>

<p>Fortunately, you can solve this problem simply by using Network Time Protocol (NTP) synchronization.</p>

<h3>Configure Time Zones</h3>

<ol>
  <li>Set your server's time zone:
    <div class="hacker">sudo timedatectl list-timezones</div></li>
  <li>In the resulting (long) list, find your region (of your server) and include it your command:
    <div class="hacker">sudo timedatectl set-timezone <em><u>your region/geographic area</u></em> </div>

  For example, if you live in Los Angeles:
    <div class="hacker">sudo timedatectl set-timezone America/Los_Angeles</div>

  Your system updates to your selected timezone.</li>

  <li>Optionally, confirm the timezone:
    <div class="hacker">sudo timedatectl</div></li>
</ol>


<h3>Configure NTP synchronization</h3>

<p>Next, configure your Network Time Protocol (NTP). NTP is an Internet protocol that synchronizes time of computer clocks across the Internet and helps to determine when events happened between systems. NTP works by a client requesting the current time from an NTP server and then using the server's response to set its own clock. Afterward, your computer is accurately synced with networked time servers.</p>

<ol>
  <li>Install the NTP daemon:
    <div class="hacker">sudo pacman -S ntp</div> </li>

  <li>Enable NTP:
    <div class="hacker">sudo timedatectl set-ntp true</div></li>
</ol>

<p>NTP synchronization is now active on your server. This means your system will adjust the time throughout the day to match up with global NTP servers.</p>

<h2>Next steps</h2>
 
<p>If you like this configuration, you can <a href="/article/19042?prog_id=PROG_ID">take a server snapshot</a> to use as a guide for setting up future installations.</p>

<p>Also, consider <a href="/article/17329?prog_id=PROG_ID">adding swap space</a>. Adding swap space is an easy way to increase cloud server performance and is particularly helpful if you host databases on your system.</p>
</body>
</html>